import{d as E,w as M}from"./index.79080c15.js";import{a1 as h}from"./scheduler.3fa55d27.js";function z(e,t){const n={},r={},s={$$scope:1};let a=e.length;for(;a--;){const i=e[a],d=t[a];if(d){for(const u in i)u in d||(r[u]=1);for(const u in d)s[u]||(n[u]=d[u],s[u]=1);e[a]=d}else for(const u in i)s[u]=1}for(const i in r)i in n||(n[i]=void 0);return n}function F(e){return typeof e=="object"&&e!==null?e:{}}function P(e,t,n,r){var s,a,i=!1,d=n.length>=2,u=(o,c,y)=>{if(s=c,d&&(a=o),!i){let f=t(o,c,y);if(t.length<2)c(f);else return f}i=!1},g=E(e,u,r),A=!Array.isArray(e);function R(o){var c=n(o,a);A?(i=!0,e.set(c)):c.forEach((y,f)=>{i=!0,e[f].set(y)}),i=!1}var b=!1;function k(o){var c,y,f,v;if(b){v=o(h(g)),s(v);return}var V=g.subscribe(j=>{b?c?y=!0:c=!0:f=j});v=o(f),b=!0,s(v),V(),b=!1,y&&(v=h(g)),c&&R(v)}return{subscribe:g.subscribe,set(o){k(()=>o)},update:k}}const Q=20,_=M([]),p=M(null),T=new Map,w=e=>{if(T.has(e))return;const t=setTimeout(()=>{T.delete(e),S(e)},1e3);T.set(e,t)},x=e=>{const t=T.get(e);t&&clearTimeout(t)};function B(e){e.id&&x(e.id),_.update(t=>t.map(n=>n.id===e.id?{...n,...e}:n))}function L(e){_.update(t=>[e,...t].slice(0,Q))}function W(e){h(_).find(t=>t.id===e.id)?B(e):L(e)}function C(e){_.update(t=>(e?w(e):t.forEach(n=>{w(n.id)}),t.map(n=>n.id===e||e===void 0?{...n,visible:!1}:n)))}function S(e){_.update(t=>e===void 0?[]:t.filter(n=>n.id!==e))}function G(e){p.set(e)}function J(e){let t;p.update(n=>(t=e-(n||0),null)),_.update(n=>n.map(r=>({...r,pauseDuration:r.pauseDuration+t})))}const H={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function K(e={}){return{toasts:P(_,n=>n.map(r=>{var s,a;return{...e,...e[r.type],...r,duration:r.duration||((s=e[r.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||H[r.type],style:[e.style,(a=e[r.type])==null?void 0:a.style,r.style].join(";")}}),n=>n),pausedAt:p}}const I=e=>typeof e=="function",D=(e,t)=>I(e)?e(t):e,N=(()=>{let e=0;return()=>(e+=1,e.toString())})(),X=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||N()}),m=e=>(t,n)=>{const r=U(t,e,n);return W(r),r.id},l=(e,t)=>m("blank")(e,t);l.error=m("error");l.success=m("success");l.loading=m("loading");l.custom=m("custom");l.dismiss=e=>{C(e)};l.remove=e=>S(e);l.promise=(e,t,n)=>{const r=l.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(s=>(l.success(D(t.success,s),{id:r,...n,...n==null?void 0:n.success}),s)).catch(s=>{l.error(D(t.error,s),{id:r,...n,...n==null?void 0:n.error})}),e};export{B as a,F as b,J as e,z as g,X as p,G as s,l as t,K as u};
